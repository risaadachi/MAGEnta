<h1>Codes</h1>

<%= render 'codes/show', code: @code %>

<!-- いいね -->

<% if @code.favorited_by?(current_user) %>
    <%= link_to code_favorites_path(@code), method: :delete do %>
    <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
    <%= @code.favorites.count %> Fav
    <% end %>
<% else %>
    <%= link_to code_favorites_path(@code), method: :post do %>
    <i class="fa fa-heart-o" aria-hidden="true"></i>
    <%= @code.favorites.count %> Fav
    <% end %>
<% end %>

<!-- コメント -->

<%= @code.comments.count %> comments<br>

<%= form_for [@code, @comment] do |f| %>
    <%= f.text_area :body, placeholder: "Comment!!" %>
    <%= f.submit 'Submit' %><br>
<% end %>

<%= render 'comments/index', comments: @comments, code: @code %>

<!-- 編集と削除 -->

<% if @code.user == current_user %>
    <%= link_to "Edit", edit_code_path(@code.id) %>
    <%= link_to "Delete", code_path(@code.id), method: :delete %>
<% end %>